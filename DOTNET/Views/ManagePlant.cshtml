@model Madar.ViewModels.AreaOwnerVMs.PlantViewModel

@{
    ViewData["Title"] = "Plant Management";
    ViewData["PageTitle"] = "Plant Management";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid">
    <!-- Header Section -->
    <div class="row mb-4">
        <div class="col-md-8">
            <h4 class="mb-1">
                <i class="fas fa-industry me-2"></i>@Model.Plant.PlantName
            </h4>
            <p class="text-muted mb-0">Manage your plant information and settings</p>
        </div>
        <div class="col-md-4 text-end">
            <div class="plant-status-badge">
                @{
                    var statusBadgeClass = Model.Plant.PlantStatus == "Active" ? "success" :
                    Model.Plant.PlantStatus == "Under_Maintenance" ? "warning" : "secondary";
                }
                <span class="badge bg-@statusBadgeClass fs-6">
                    <i class="fas fa-circle me-1"></i>@Model.Plant.PlantStatus
                </span>
            </div>
        </div>
    </div>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            @TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <div class="row">
        <!-- Plant Information Form -->
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-edit me-2"></i>Plant Information
                    </h5>
                </div>
                <div class="card-body">
                    <form method="POST" asp-controller="Plant" asp-action="UpdatePlant" asp-route-plantId="@Model.Plant.PlantId">
                        @Html.AntiForgeryToken()
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Plant Name *</label>
                                    <input type="text" class="form-control" name="PlantName"
                                           value="@Model.Plant.PlantName" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Plant Type *</label>
                                    <input type="text" class="form-control" name="PlantType"
                                           value="@Model.Plant.PlantType" required>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label class="form-label">Plant Location *</label>
                                    <textarea class="form-control" name="PlantLocation" rows="2"
                                              required>@Model.Plant.PlantLocation</textarea>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Plant Status *</label>
                                    <select class="form-control" name="PlantStatus" required>
                                        <option value="Active" selected="@(Model.Plant.PlantStatus == "Active")">Active</option>
                                        <option value="Inactive" selected="@(Model.Plant.PlantStatus == "Inactive")">Inactive</option>
                                        <option value="Under_Maintenance" selected="@(Model.Plant.PlantStatus == "Under_Maintenance")">Under Maintenance</option>
                                        <option value="Decommissioned" selected="@(Model.Plant.PlantStatus == "Decommissioned")">Decommissioned</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Plant Capacity</label>
                                    <input type="text" class="form-control" name="PlantCapacity"
                                           value="@Model.Plant.PlantCapacity"
                                           placeholder="e.g., 1000 units/hour">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Equipment Count *</label>
                                    <input type="number" class="form-control" name="PlantEquipmentCount"
                                           value="@Model.Plant.PlantEquipmentCount"
                                           min="0" required>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-12">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <small class="text-muted">
                                            Last updated: @Model.Plant.UpdatedAt.ToString("MMM dd, yyyy HH:mm")
                                        </small>
                                    </div>
                                    <div>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save me-2"></i>Update Plant Information
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Plant Statistics & Quick Actions -->
        <div class="col-lg-4">
            <div class="card">
                <div class="card-header">
                    <h6 class="card-title mb-0">
                        <i class="fas fa-info-circle me-2"></i>Plant Details
                    </h6>
                </div>
                <div class="card-body">
                    <div class="plant-details">
                        <div class="detail-item mb-2">
                            <small class="text-muted">Plant ID:</small>
                            <div class="fw-semibold">@Model.Plant.PlantId</div>
                        </div>
                        <div class="detail-item mb-2">
                            <small class="text-muted">Area Owner:</small>
                            <div class="fw-semibold">@Model.AreaOwner.AoFname @Model.AreaOwner.AoLname</div>
                        </div>
                        <div class="detail-item mb-2">
                            <small class="text-muted">Created Date:</small>
                            <div class="fw-semibold">@Model.Plant.CreatedAt.ToString("MMM dd, yyyy")</div>
                        </div>
                        <div class="detail-item mb-2">
                            <small class="text-muted">Total Equipment:</small>
                            <div class="fw-semibold">@Model.EquipmentCount items</div>
                        </div>
                        <div class="detail-item">
                            <small class="text-muted">Active Equipment:</small>
                            <div class="fw-semibold text-success">@Model.ActiveEquipment items</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <style>
        .plant-status-badge .badge {
            font-size: 0.9rem;
            padding: 8px 12px;
        }

        .stat-item {
            padding: 10px 0;
            border-bottom: 1px solid #f8f9fa;
        }

            .stat-item:last-child {
                border-bottom: none;
            }

        .plant-details .detail-item {
            padding: 8px 0;
            border-bottom: 1px solid #f8f9fa;
        }

            .plant-details .detail-item:last-child {
                border-bottom: none;
            }

        .form-control:focus {
            border-color: #0d6efd;
            box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
        }

        .card {
            border: none;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        }

        .card-header {
            border-bottom: 1px solid #e3e6f0;
        }
    </style>
}